

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PyOpenGLng.GlApi &mdash; PyOpenGLng 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../static/PyOpenGLng.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/underscore.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
    <link rel="top" title="PyOpenGLng 0.1.0 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">PyOpenGLng 0.1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for PyOpenGLng.GlApi</h1><div class="highlight"><pre>
<span class="c">####################################################################################################</span>
<span class="c"># </span>
<span class="c"># PyOpenGLng - An OpenGL Python Wrapper with a High Level API.</span>
<span class="c"># Copyright (C) 2014 Fabrice Salvaire</span>
<span class="c">#</span>
<span class="c"># This program is free software: you can redistribute it and/or modify</span>
<span class="c"># it under the terms of the GNU General Public License as published by</span>
<span class="c"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c"># (at your option) any later version.</span>
<span class="c"># </span>
<span class="c"># This program is distributed in the hope that it will be useful,</span>
<span class="c"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c"># GNU General Public License for more details.</span>
<span class="c"># </span>
<span class="c"># You should have received a copy of the GNU General Public License</span>
<span class="c"># along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c"># </span>
<span class="c">####################################################################################################</span>

<span class="sd">&quot;&quot;&quot;This module implements an Oriented Object interface to the `OpenGL XML API Registry</span>
<span class="sd">&lt;http://www.opengl.org/registry&gt;`_ which describe the OpenGL API and theses official extensions. The</span>
<span class="sd">XML file and its relative documentation are stored in the `Khronos OpenGL API CVS</span>
<span class="sd">&lt;https://cvs.khronos.org/svn/repos/ogl/trunk/doc/registry/public/api&gt;`_.</span>

<span class="sd">To generate the API of a particular OpenGL version uses for example this code snippet::</span>

<span class="sd">  xml_file_path = default_api_path(&#39;gl&#39;) # path to gl.xml</span>
<span class="sd">  gl_spec = GlSpecParser(xml_file_path)</span>
<span class="sd">  api_enums, api_commands = gl_spec.generate_api(&#39;gles&#39;, ApiNumber(&#39;2.0&#39;), &#39;core&#39;)</span>
<span class="sd">  api_enums, api_commands = gl_spec.generate_api(&#39;gl&#39;, ApiNumber(&#39;4.4&#39;), &#39;core&#39;)</span>

<span class="sd">Then you will get an instance of the class :class:`Enums` and :class:`Commands` corresponding to the</span>
<span class="sd">requested API.</span>

<span class="sd">The :command:`query-opengl-api` tool in the :file:`bin` directory provides some functions to query</span>
<span class="sd">the OpenGL API. You could look at its source code to learn how to use this module. See the</span>
<span class="sd">:ref:`tools section &lt;tools-page&gt;`.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c">####################################################################################################</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">lxml</span> <span class="kn">import</span> <span class="n">etree</span>

<span class="c">####################################################################################################</span>

<span class="kn">from</span> <span class="nn">.ApiNumber</span> <span class="kn">import</span> <span class="n">ApiNumber</span>

<span class="c">####################################################################################################</span>

<span class="n">_module_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="c">####################################################################################################</span>

<div class="viewcode-block" id="default_api_path"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.default_api_path">[docs]</a><span class="k">def</span> <span class="nf">default_api_path</span><span class="p">(</span><span class="n">file_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Return the path to the file stored in the module directory. The &quot;.xml&quot; extension is</span>
<span class="sd">    concatened to the file name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">api_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">api_path</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s">&#39;.xml&#39;</span><span class="p">)</span>

<span class="c">####################################################################################################</span>
</div>
<div class="viewcode-block" id="NameDict"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.NameDict">[docs]</a><span class="k">class</span> <span class="nc">NameDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class extend the Python dictionnary class with two methods :meth:`register` and</span>
<span class="sd">    :meth:`unregister`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="NameDict.register"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.NameDict.register">[docs]</a>    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        
        <span class="sd">&quot;&quot;&quot; Add the object to the dictionnary using its *name* attribute as a key. &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s">&quot;item </span><span class="si">%s</span><span class="s"> is already registered&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

        <span class="bp">self</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="NameDict.unregister"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.NameDict.unregister">[docs]</a>    <span class="k">def</span> <span class="nf">unregister</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_name</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Remove the given key. &quot;&quot;&quot;</span>

        <span class="k">del</span> <span class="bp">self</span><span class="p">[</span><span class="n">item_name</span><span class="p">]</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="NameDict.iter_sorted"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.NameDict.iter_sorted">[docs]</a>    <span class="k">def</span> <span class="nf">iter_sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c"># Fixme: iter(), sorted dict?</span>
        <span class="c"># OrderedDict(sorted(d.items(), key=lambda t: t[0]))</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(),</span> <span class="nb">cmp</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">cmp</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

<span class="c">####################################################################################################</span>
</div></div>
<div class="viewcode-block" id="Types"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Types">[docs]</a><span class="k">class</span> <span class="nc">Types</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class registers the API types.</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">      :attr:`c_types`</span>
<span class="sd">            dictionnary of types indexed by their names</span>

<span class="sd">      :attr:`types`</span>
<span class="sd">            list of types</span>

<span class="sd">    XML Registry Documentation:</span>

<span class="sd">        The ``&lt;types&gt;`` tag contains individual ``&lt;type&gt;`` tags describing each of the derived types</span>
<span class="sd">        used in the API.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c"># Fixme: attribute names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">types</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c_types</span> <span class="o">=</span> <span class="p">{}</span> <span class="c"># fixme: name is not uniq, e.g. GLbyte is defined 3 times</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="Types.register"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Types.register">[docs]</a>    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Register a type. &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span>
        <span class="c"># Fixme: gles ...</span>
        <span class="k">if</span> <span class="n">type_</span><span class="o">.</span><span class="n">c_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">type_</span><span class="o">.</span><span class="n">requires</span> <span class="o">!=</span> <span class="s">&#39;khrplatform&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">type_</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_types</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">c_types</span><span class="p">[</span><span class="n">type_</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NameError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is already registered&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="Types.translate_gl_type"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Types.translate_gl_type">[docs]</a>    <span class="k">def</span> <span class="nf">translate_gl_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gl_type</span><span class="p">):</span>

        <span class="c"># Fixme: name -&gt; type instance</span>

        <span class="c"># return self.c_types.get(gl_type, gl_type)</span>

        <span class="k">if</span> <span class="n">gl_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_types</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_types</span><span class="p">[</span><span class="n">gl_type</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># Fixme: None ?</span>
            <span class="k">return</span> <span class="n">gl_type</span>
            <span class="c"># raise NameError(&quot;Failed to translate type %s&quot; % (gl_type))</span>

<span class="c">####################################################################################################</span>
</div></div>
<div class="viewcode-block" id="Type"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Type">[docs]</a><span class="k">class</span> <span class="nc">Type</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class defines an OpenGL type.</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">        :attr:`api`</span>
<span class="sd">            API name</span>

<span class="sd">        :attr:`api_entry`</span>
<span class="sd">            Boolean, cf. supra</span>

<span class="sd">        :attr:`c_code`</span>
<span class="sd">            correponding C type declaration (without name), e.g. ``typedef unsigned int``</span>

<span class="sd">        :attr:`c_type`</span>
<span class="sd">            correponding C type, e.g. ``int``</span>

<span class="sd">        :attr:`comment`</span>
<span class="sd">           cf. supra</span>

<span class="sd">        :attr:`name`</span>
<span class="sd">             e.g. ``GLenum``</span>

<span class="sd">        :attr:`pointer`</span>
<span class="sd">            Boolean</span>

<span class="sd">        :attr:`requires`</span>
<span class="sd">           cf. supra</span>

<span class="sd">        :attr:`unsigned`</span>
<span class="sd">            Boolean</span>

<span class="sd">    XML Registry Documentation:</span>

<span class="sd">        Each ``&lt;type&gt;`` tag contains legal C code, with attributes or embedded tags denoting the</span>
<span class="sd">        type name.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;type&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            requires</span>
<span class="sd">                another type name this type requires to complete its definition.</span>
<span class="sd">            </span>
<span class="sd">            name</span>
<span class="sd">                name of this type (if not defined in the tag body).</span>
<span class="sd">            </span>
<span class="sd">            api</span>
<span class="sd">                an API name (see ``&lt;feature&gt;`` below) which specializes this definition of the named</span>
<span class="sd">                type, so that the same API types may have different definitions for e.g. GL ES and</span>
<span class="sd">                GL.</span>
<span class="sd">            </span>
<span class="sd">            comment</span>
<span class="sd">                arbitrary string (unused).</span>

<span class="sd">        Contents of ``&lt;group&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            ``&lt;type&gt;`` contains text which is legal C code for a type declaration. It may also</span>
<span class="sd">            contain embedded tags:</span>
<span class="sd">            </span>
<span class="sd">                ``&lt;apientry/&gt;``</span>
<span class="sd">                    insert a platform calling convention macro here during header generation, used</span>
<span class="sd">                    mostly for function pointer types.</span>
<span class="sd">            </span>
<span class="sd">                ``&lt;name&gt;``</span>
<span class="sd">                    contains the name of this type (if not defined in the tag attributes).</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">#: List of C types</span>
    <span class="n">_C_TYPES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="c"># integer types</span>
        <span class="s">&#39;char&#39;</span><span class="p">,</span>
        <span class="s">&#39;int8_t&#39;</span><span class="p">,</span>
        <span class="s">&#39;uint8_t&#39;</span><span class="p">,</span>
        <span class="s">&#39;short&#39;</span><span class="p">,</span>
        <span class="s">&#39;int32_t&#39;</span><span class="p">,</span>
        <span class="s">&#39;int&#39;</span><span class="p">,</span>
        <span class="s">&#39;int64_t&#39;</span><span class="p">,</span>
        <span class="s">&#39;uint64_t&#39;</span><span class="p">,</span>
        <span class="c"># float types</span>
        <span class="s">&#39;float&#39;</span><span class="p">,</span>
        <span class="s">&#39;float_t&#39;</span><span class="p">,</span>
        <span class="s">&#39;double&#39;</span><span class="p">,</span>
        <span class="c"># pointer types</span>
        <span class="s">&#39;intptr_t&#39;</span><span class="p">,</span>
        <span class="s">&#39;ptrdiff_t&#39;</span><span class="p">,</span>
        <span class="s">&#39;ssize_t&#39;</span><span class="p">,</span>
        <span class="s">&#39;void&#39;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span><span class="p">,</span>
                 <span class="n">c_declaration_head</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">c_declaration_tail</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">requires</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">api_entry</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="c"># Fixme: -&gt; concat name? /!\ function pointer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c_declaration_head</span> <span class="o">=</span> <span class="n">c_declaration_head</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c_declaration_tail</span> <span class="o">=</span> <span class="n">c_declaration_tail</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_entry</span> <span class="o">=</span> <span class="n">api_entry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">requires</span> <span class="o">=</span> <span class="n">requires</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">=</span> <span class="n">api</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>

        <span class="c"># Parse the C type declaration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unsigned</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c_type</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c_declaration_head</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_declaration_head</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_declaration_head</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;typedef&#39;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_declaration_head</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;(&#39;</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_declaration_head</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;khronos_&#39;</span><span class="p">):</span>
                    <span class="n">token</span> <span class="o">=</span> <span class="n">token</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="s">&#39;khronos_&#39;</span><span class="p">):]</span>
                <span class="k">if</span> <span class="n">token</span> <span class="o">==</span> <span class="s">&#39;unsigned&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">unsigned</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">elif</span> <span class="n">token</span> <span class="o">==</span> <span class="s">&#39;signed&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">unsigned</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">elif</span> <span class="n">token</span> <span class="o">==</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">elif</span> <span class="n">token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_C_TYPES</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">c_type</span> <span class="o">=</span> <span class="n">token</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_declaration_head</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">c_declaration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_declaration_head</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">c_declaration</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
            <span class="n">c_declaration</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_declaration_tail</span>
            <span class="n">_module_logger</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&quot;Unsupported type declaration for </span><span class="si">%s</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">c_declaration</span><span class="p">)</span>
            <span class="c"># Fixme:</span>
            <span class="c"># raise NameError(&quot;Unsupported type declaration for %s&quot; % (name))</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Return the C type string, e.g. ``unsigned int *``. &quot;&quot;&quot;</span>

        <span class="c"># Fixme: str ?</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">unsigned</span><span class="p">:</span>
            <span class="n">type_string</span> <span class="o">=</span> <span class="s">&#39;unsigned &#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">type_string</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">type_string</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_type</span> <span class="c"># if None?</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="p">:</span>
            <span class="n">type_string</span> <span class="o">+=</span> <span class="s">&#39; *&#39;</span>

        <span class="k">return</span> <span class="n">type_string</span>

<span class="c">####################################################################################################</span>
</div>
<div class="viewcode-block" id="Groups"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Groups">[docs]</a><span class="k">class</span> <span class="nc">Groups</span><span class="p">(</span><span class="n">NameDict</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class registers Enumerant Groups.</span>

<span class="sd">    XML Registry Documentation:</span>

<span class="sd">        The ``&lt;groups&gt;`` tags contain individual ``&lt;group&gt;`` tags describing some of the group</span>
<span class="sd">        annotations used for return and parameter types.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;groups&gt;`` tags: None</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;groups&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            Each ``&lt;groups&gt;`` block contains zero or more ``&lt;group&gt;`` tags, in arbitrary order</span>
<span class="sd">            (although they are typically ordered by group name, to improve human readability).</span>

<span class="sd">    &quot;&quot;&quot;</span>

<span class="c">####################################################################################################</span>
</div>
<div class="viewcode-block" id="Group"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Group">[docs]</a><span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class defines an Enumerant Group, e.g. *TextureMagFilter* regroups the relevant</span>
<span class="sd">    enumerant for texture magnification filter</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">        :attr:`comment`</span>

<span class="sd">        :attr:`name`</span>

<span class="sd">    XML Registry Documentation:</span>
<span class="sd">    </span>
<span class="sd">        Each ``&lt;group&gt;`` tag defines a single group annotation.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;group&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            name</span>
<span class="sd">                group name, an arbitrary string for grouping a set of enums together within a</span>
<span class="sd">                broader namespace.</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;group&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            ``&lt;group&gt;`` tags may contain zero or more ``&lt;enum&gt;`` tags. Each ``&lt;enum&gt;`` tag may</span>
<span class="sd">            contain only a name attribute, which should correspond to a ``&lt;enum&gt;`` definition in an</span>
<span class="sd">            ``&lt;enums&gt;`` block.</span>
<span class="sd">        </span>
<span class="sd">        Meaning of ``&lt;group&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            If a ``&lt;proto&gt;`` or ``&lt;param&gt;`` tag of a ``&lt;command&gt;`` has a group attribute defined,</span>
<span class="sd">            and that attribute matches a ``&lt;group&gt;`` name, then the return type or parameter type is</span>
<span class="sd">            considered to be constrained to values defined by the corresponding ``&lt;group&gt;``. C</span>
<span class="sd">            language bindings do not attempt to enforce this constraint in any way, but other</span>
<span class="sd">            language bindings may try to do so.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span><span class="p">,</span> <span class="n">enum_name_list</span><span class="p">,</span>
                 <span class="n">comment</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_list</span> <span class="o">=</span> <span class="n">enum_name_list</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_list</span><span class="p">)</span>

<span class="c">####################################################################################################</span>
</div>
<div class="viewcode-block" id="Enums"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Enums">[docs]</a><span class="k">class</span> <span class="nc">Enums</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class defines a list of enumerants.</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">        :attr:`comment`</span>

<span class="sd">        :attr:`end`</span>

<span class="sd">        :attr:`group`</span>

<span class="sd">        :attr:`namespace`</span>

<span class="sd">        :attr:`start`</span>

<span class="sd">        :attr:`type`</span>

<span class="sd">        :attr:`vendor`</span>

<span class="sd">    XML Registry Documentation:</span>

<span class="sd">        The ``&lt;enums&gt;`` tags contain individual ``&lt;enum&gt;`` tags describing each of the token</span>
<span class="sd">        (enumerant) names used in the API.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;enums&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            namespace</span>
<span class="sd">                a string for grouping many different enums together, currently unused but typically</span>
<span class="sd">                something like GL for all enums in the OpenGL / OpenGL ES shared namespace. Multiple</span>
<span class="sd">                ``&lt;enums&gt;`` tags can share the same namespace.</span>
<span class="sd">            </span>
<span class="sd">            type </span>
<span class="sd">                a string describing the data type of the values of this group of enums, currently</span>
<span class="sd">                unused. The only string used at present in the is bitmask.</span>
<span class="sd">            </span>
<span class="sd">            start, end</span>
<span class="sd">                 integers defining the start and end of a reserved range of enumerants for a</span>
<span class="sd">                 particular vendor or purpose. start must be &lt;= end. These fields define formal</span>
<span class="sd">                 enumerant allocations within a namespace, and are made by the Khronos Registrar on</span>
<span class="sd">                 request from implementers following the enum allocation policy.</span>
<span class="sd">            </span>
<span class="sd">            vendor</span>
<span class="sd">                 string describing the vendor or purposes to whom a reserved range of enumerants is</span>
<span class="sd">                 allocated.</span>
<span class="sd">            </span>
<span class="sd">            comment</span>
<span class="sd">                 arbitrary string (unused)</span>
<span class="sd">            </span>
<span class="sd">            group</span>
<span class="sd">                group name, an arbitrary string.    </span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;enums&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            Each ``&lt;enums&gt;`` block contains zero or more ``&lt;enum&gt;`` and ``&lt;unused&gt;`` tags, in</span>
<span class="sd">            arbitrary order (although they are typically ordered by sorting on enumerant values, to</span>
<span class="sd">            improve human readability).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">namespace</span><span class="p">,</span>
                 <span class="n">group</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">vendor</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span> <span class="o">=</span> <span class="n">namespace</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type_</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">end</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vendor</span> <span class="o">=</span> <span class="n">vendor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enum_value_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Return an iterator over the enumerant instances. &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_dict</span><span class="o">.</span><span class="n">itervalues</span><span class="p">()</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="Enums.iter_sorted"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Enums.iter_sorted">[docs]</a>    <span class="k">def</span> <span class="nf">iter_sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>

        <span class="c"># Fixme: iter(), sorted dict?</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_dict</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(),</span> <span class="nb">cmp</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">cmp</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

    <span class="c">##############################################</span>
</div>
    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Return the number of enumerants. &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_dict</span><span class="p">)</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Return the enumerant instance for the given name or value. &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enum_value_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s">&quot;Any enum having this name or value: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="Enums.register"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Enums.register">[docs]</a>    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enum</span><span class="p">,</span> <span class="n">primary_registration</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        
        <span class="sd">&quot;&quot;&quot; Register an enumerant. If the flag *primary_registration* is set then the enumerant back</span>
<span class="sd">        reference is set.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">enum</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_dict</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">namespace</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">enums</span><span class="o">.</span><span class="n">namespace</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">namespace</span> <span class="o">=</span> <span class="s">&#39;(namespace not yed defined)&#39;</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s">&quot;enum </span><span class="si">%s</span><span class="s"> already registered in </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_dict</span><span class="p">[</span><span class="n">enum</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">enum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enum_value_dict</span><span class="p">[</span><span class="n">enum</span><span class="o">.</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">enum</span>

        <span class="k">if</span> <span class="n">primary_registration</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">enum</span><span class="o">.</span><span class="n">enums</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NameError</span><span class="p">(</span><span class="s">&#39;Back reference is already affected for enum </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">enum</span><span class="o">.</span><span class="n">enums</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="Enums.unregister"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Enums.unregister">[docs]</a>    <span class="k">def</span> <span class="nf">unregister</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enum_name</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Remove an enumerant. &quot;&quot;&quot;</span>

        <span class="n">enum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_dict</span><span class="p">[</span><span class="n">enum_name</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enum_value_dict</span><span class="p">[</span><span class="n">enum</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enum_name_dict</span><span class="p">[</span><span class="n">enum_name</span><span class="p">]</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="Enums.merge"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Enums.merge">[docs]</a>    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api</span><span class="p">,</span> <span class="n">enums</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Add the enumerants from *enums* that match *api*. &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">enum</span> <span class="ow">in</span> <span class="n">enums</span><span class="o">.</span><span class="n">_enum_name_dict</span><span class="o">.</span><span class="n">itervalues</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">enum</span><span class="o">.</span><span class="n">api</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">enum</span><span class="o">.</span><span class="n">api</span> <span class="o">==</span> <span class="n">api</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">enum</span><span class="p">,</span> <span class="n">primary_registration</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="c">####################################################################################################</span>
</div></div>
<div class="viewcode-block" id="Enum"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Enum">[docs]</a><span class="k">class</span> <span class="nc">Enum</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class defines an enumerant.</span>

<span class="sd">    The name of an enumerant can be retrieved using ``str(enumerant)`` and its value using</span>
<span class="sd">    ``int(enumerant)``.</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">        :attr:`alias`</span>

<span class="sd">        :attr:`api`</span>

<span class="sd">        :attr:`comment`</span>

<span class="sd">        :attr:`enums`</span>
<span class="sd">             back reference to the :class:`Enums` instance</span>

<span class="sd">        :attr:`name`</span>

<span class="sd">        :attr:`type`</span>
<span class="sd">            cf. supra</span>

<span class="sd">        :attr:`value`</span>

<span class="sd">    XML Registry Documentation:</span>

<span class="sd">        Each ``&lt;enum&gt;`` tag defines a single GL (or other API) token.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;enum&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            value</span>
<span class="sd">                enumerant value, a legal C constant (usually a hexadecimal integer).</span>
<span class="sd">            </span>
<span class="sd">            name</span>
<span class="sd">                enumerant name, a legal C preprocessor token name.</span>
<span class="sd">            </span>
<span class="sd">            api</span>
<span class="sd">                an API name which specializes this definition of the named enum, so that different</span>
<span class="sd">                APIs may have different values for the same token (used to address a few accidental</span>
<span class="sd">                incompatibilities between GL and GL ES).</span>
<span class="sd">            </span>
<span class="sd">            type</span>
<span class="sd">                legal C suffix for the value to force it to a specific type. Currently only u and</span>
<span class="sd">                ull are used, for unsigned 32- and 64-bit integer values, respectively.  Separated</span>
<span class="sd">                from the value field since this eases parsing and sorting of values, and is rarely</span>
<span class="sd">                used.</span>
<span class="sd">            </span>
<span class="sd">            alias</span>
<span class="sd">                name of another enumerant this is an alias of, used where token names have been</span>
<span class="sd">                changed as a result of profile changes or for consistency purposes.  An enumerant</span>
<span class="sd">                alias is simply a different name for the exact same value. At present, enumerants</span>
<span class="sd">                which are promoted from extension to core API status are not tagged as aliases -</span>
<span class="sd">                just enumerants tagged as aliases in the Changed Tokens sections of appendices to</span>
<span class="sd">                the OpenGL Specification. This might change in the future.</span>
<span class="sd">            </span>
<span class="sd">            comment</span>
<span class="sd">                arbitrary string (unused).</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;enum&gt;`` tags:</span>
<span class="sd">       </span>
<span class="sd">            ``&lt;enum&gt;`` tags have no allowed contents. All information is contained in the</span>
<span class="sd">            attributes.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span>
                 <span class="n">type_</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type_</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">=</span> <span class="n">api</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enums</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__int__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="s">&quot;Enum </span><span class="si">%s</span><span class="s"> = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">hex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="Enum.long_repr"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Enum.long_repr">[docs]</a>    <span class="k">def</span> <span class="nf">long_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; (type: </span><span class="si">%(type)s</span><span class="s">, alias: </span><span class="si">%(alias)s</span><span class="s">, api: </span><span class="si">%(api)s</span><span class="s">, comment: </span><span class="si">%(comment)s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span>

<span class="c">####################################################################################################</span>
</div></div>
<div class="viewcode-block" id="Commands"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Commands">[docs]</a><span class="k">class</span> <span class="nc">Commands</span><span class="p">(</span><span class="n">NameDict</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class stores the OpenGL commands.</span>

<span class="sd">    XML Registry Documentation:</span>

<span class="sd">        The ``&lt;commands&gt;`` tag contains definitions of each of the functions (commands) used in the</span>
<span class="sd">        API.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;commands&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            namespace</span>
<span class="sd">                a string defining the namespace in which commands live, currently unused but</span>
<span class="sd">                typically something like GL.</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;commands&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            Each ``&lt;commands&gt;`` block contains zero or more ``&lt;command&gt;`` tags, in arbitrary order</span>
<span class="sd">            (although they are typically ordered by sorting on the command name, to improve human</span>
<span class="sd">            readability).</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="c">####################################################################################################</span>
</div>
<div class="viewcode-block" id="Command"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Command">[docs]</a><span class="k">class</span> <span class="nc">Command</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    
    <span class="sd">&quot;&quot;&quot; This class defines an OpenGL command.</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">        :attr:`input_parameter`</span>
<span class="sd">            number of input parameters</span>

<span class="sd">        :attr:`name`</span>
<span class="sd">            command name</span>

<span class="sd">        :attr:`output_parameter`</span>
<span class="sd">            number of output parameters</span>

<span class="sd">        :attr:`parameter_dict`</span>
<span class="sd">             dictionnary of parameters</span>

<span class="sd">        :attr:`parameters`</span>
<span class="sd">             list of parameters</span>

<span class="sd">        :attr:`return_type`</span>

<span class="sd">    XML Registry Documentation:</span>
<span class="sd">    </span>
<span class="sd">        The ``&lt;command&gt;`` tag contains a structured definition of a single API command (function).</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;command&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            comment</span>
<span class="sd">                arbitrary string (unused).</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;command&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            * ``&lt;proto&gt;`` must be the first element, and is a tag defining the C function prototype</span>
<span class="sd">              of a command as described below, up to the function name but not including function</span>
<span class="sd">              parameters.</span>
<span class="sd">            </span>
<span class="sd">            * ``&lt;param&gt;`` elements for each command parameter follow, defining its name and type, as</span>
<span class="sd">              described below. If a command takes no arguments, it has no ``&lt;param&gt;`` tags.</span>
<span class="sd">            </span>
<span class="sd">            Following these elements, the remaining elements in a ``&lt;command&gt;`` tag are optional and</span>
<span class="sd">            may be in any order:</span>
<span class="sd">            </span>
<span class="sd">            * ``&lt;alias&gt;`` has no attributes and contains a string which is the name of another</span>
<span class="sd">              command this command is an alias of, used when promoting a function from extension to</span>
<span class="sd">              ARB or ARB to API status. A command alias describes the case where there are two</span>
<span class="sd">              function names which resolve to the same client library code, so (for example) the</span>
<span class="sd">              case where a command is promoted but is also given different GLX protocol would not be</span>
<span class="sd">              an alias in this sense.</span>
<span class="sd">            </span>
<span class="sd">            * ``&lt;vecequiv&gt;`` has no attributes and contains a string which is the name of another</span>
<span class="sd">              command which is the vector equivalent of this command. For example, the vector</span>
<span class="sd">              equivalent of glVertex3f is glVertex3fv.</span>
<span class="sd">            </span>
<span class="sd">            * ``&lt;glx&gt;`` defines GLX protocol information for this command, as described below.  Many</span>
<span class="sd">              GL commands don&#39;t have GLX protocol defined, and other APIs such as EGL and WGL don&#39;t</span>
<span class="sd">              use GLX at all.</span>
<span class="sd">        </span>
<span class="sd">        Command prototype (``&lt;proto&gt;`` tags):</span>
<span class="sd">        </span>
<span class="sd">        The ``&lt;proto&gt;`` tag defines the return type and name of a command.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;proto&gt;`` tags</span>
<span class="sd">        </span>
<span class="sd">            group</span>
<span class="sd">                group name, an arbitrary string.</span>
<span class="sd">        </span>
<span class="sd">        If the group name is defined, it may be interpreted as described in ``&lt;ref&gt;``.</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;proto&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            The text elements of a ``&lt;proto&gt;`` tag, with all other tags removed, is legal C code</span>
<span class="sd">            describing the return type and name of a command. In addition it may contain two</span>
<span class="sd">            semantic tags:</span>
<span class="sd">            </span>
<span class="sd">            * The ``&lt;ptype&gt;`` tag is optional, and contains text which is a valid type name found in</span>
<span class="sd">              ``&lt;type&gt;`` tag, and indicates that this type must be previously defined for the</span>
<span class="sd">              definition of the command to succeed. Builtin C types, and any derived types which are</span>
<span class="sd">              expected to be found in other header files, should not be wrapped in ``&lt;ptype&gt;`` tags.</span>
<span class="sd">            </span>
<span class="sd">            * The ``&lt;name&gt;`` tag is required, and contains the command name being described.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span><span class="p">,</span> <span class="n">return_type</span><span class="p">,</span>
                 <span class="n">parameters</span><span class="o">=</span><span class="p">(),</span>
                 <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">return_type</span> <span class="o">=</span> <span class="n">return_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">parameters</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parameter_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_parameter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_parameter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parameter_dict</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">parameter</span><span class="p">)]</span> <span class="o">=</span> <span class="n">parameter</span>
            <span class="k">if</span> <span class="n">parameter</span><span class="o">.</span><span class="n">pointer</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">parameter</span><span class="o">.</span><span class="n">const</span><span class="p">:</span> <span class="c"># input parameter</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_parameter</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span> <span class="c"># output parameter</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">output_parameter</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="c"># if parameter.computed_size: </span>
        <span class="c"># Set the parameter back references</span>
        <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">:</span>
            <span class="c"># size parameter can be after pointer</span>
            <span class="k">if</span> <span class="n">parameter</span><span class="o">.</span><span class="n">size_parameter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">parameter</span><span class="o">.</span><span class="n">computed_size</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameter_dict</span><span class="p">[</span><span class="n">parameter</span><span class="o">.</span><span class="n">size_parameter</span><span class="p">]</span><span class="o">.</span><span class="n">pointer_parameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>

    <span class="c">##############################################</span>

    <span class="nd">@property</span>
<div class="viewcode-block" id="Command.number_of_parameters"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Command.number_of_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">number_of_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> (</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">return_type</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                               <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span> <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">]))</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="Command.prototype"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Command.prototype">[docs]</a>    <span class="k">def</span> <span class="nf">prototype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">with_size</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Return the C function prototype. &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> (</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">return_type</span><span class="o">.</span><span class="n">prototype</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                               <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">parameter</span><span class="o">.</span><span class="n">prototype</span><span class="p">(</span><span class="n">with_size</span><span class="p">)</span> <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">]))</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="Command.argument_types"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Command.argument_types">[docs]</a>    <span class="k">def</span> <span class="nf">argument_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">parameter</span><span class="o">.</span><span class="n">format_gl_type</span><span class="p">()</span> <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">]</span>

<span class="c">####################################################################################################</span>
</div></div>
<div class="viewcode-block" id="Parameter"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Parameter">[docs]</a><span class="k">class</span> <span class="nc">Parameter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class defines a command parameter.</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">        :attr:`array_size`</span>
<span class="sd">            array size or :obj:`None`</span>

<span class="sd">        :attr:`pointer_parameters`</span>
<span class="sd">            array of pointer parameters where this parameter acts as a size parameter</span>

<span class="sd">        :attr:`c_type`</span>
<span class="sd">            corresponding :class:`Type` instance or &quot;void&quot;</span>

<span class="sd">        :attr:`computed_size`</span>
<span class="sd">            Boolean</span>

<span class="sd">        :attr:`const`</span>
<span class="sd">            Boolean</span>

<span class="sd">        :attr:`group`</span>
<span class="sd">            group name</span>

<span class="sd">        :attr:`location`</span>
<span class="sd">            parameter position in the prototype</span>

<span class="sd">        :attr:`name`</span>
<span class="sd">            parameter name or :obj:`None` for return type</span>

<span class="sd">        :attr:`pointer`</span>
<span class="sd">            pointer level, i.e. 0 for a non-pointer parameter, 1 for ``*``, 2 for ``**``</span>

<span class="sd">        :attr:`size_multiplier`</span>
<span class="sd">            integer to be multiplied with the size parameter to get the size</span>

<span class="sd">        :attr:`size_parameter`</span>
<span class="sd">            name of the size parameter or :obj:`None`</span>

<span class="sd">        :attr:`type`</span>
<span class="sd">            parameter type without ``const and ``*``</span>

<span class="sd">    XML Registry Documentation:</span>
<span class="sd">    </span>
<span class="sd">        The ``&lt;param&gt;`` tag defines the type and name of a parameter.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;param&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            group</span>
<span class="sd">                group name, an arbitrary string.</span>
<span class="sd">            </span>
<span class="sd">            len</span>
<span class="sd">                parameter length, either an integer specifying the number of elements of the</span>
<span class="sd">                parameter ``&lt;ptype&gt;``, or a complex string expression with poorly defined syntax,</span>
<span class="sd">                usually representing a length that is computed as a combination of other command</span>
<span class="sd">                parameter values, and possibly current GL state as well.</span>
<span class="sd">        </span>
<span class="sd">        If the group name is defined, it may be interpreted as described in ``&lt;ref&gt;``.</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;param&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            The text elements of a ``&lt;param&gt;`` tag, with all other tags removed, is legal C code</span>
<span class="sd">            describing the type and name of a function parameter. In addition it may contain two</span>
<span class="sd">            semantic tags:</span>
<span class="sd">            </span>
<span class="sd">                * The ``&lt;ptype&gt;`` tag is optional, and contains text which is a valid type name</span>
<span class="sd">                  found in ``&lt;type&gt;`` tag, and indicates that this type must be previously defined</span>
<span class="sd">                  for the definition of the command to succeed. Builtin C types, and any derived</span>
<span class="sd">                  types which are expected to be found in other header files, should not be wrapped</span>
<span class="sd">                  in ``&lt;ptype&gt;`` tags.</span>
<span class="sd">                </span>
<span class="sd">                * The ``&lt;name&gt;`` tag is required, and contains the command name being described.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">gl_types</span><span class="p">,</span>
                 <span class="n">location</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                 <span class="n">ptype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">const</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">location</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="c"># None for return type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ptype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">const</span> <span class="o">=</span> <span class="n">const</span>
        <span class="c"># Fixme: -&gt; pointer_level / multiplicity ?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">=</span> <span class="n">pointer</span>

        <span class="c"># for example: GLenum -&gt; unsigned int</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c_type</span> <span class="o">=</span> <span class="n">gl_types</span><span class="o">.</span><span class="n">translate_gl_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">size_parameter</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pointer_parameters</span> <span class="o">=</span> <span class="p">[]</span> <span class="c"># back ref for size parameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_size</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># array size is known</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computed_size</span> <span class="o">=</span> <span class="bp">False</span> <span class="c"># array size is computed by OpenGL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size_multiplier</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">array_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computed_size</span> <span class="o">=</span> <span class="n">length</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;COMPSIZE&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">computed_size</span> <span class="ow">and</span> <span class="s">&#39;*&#39;</span> <span class="ow">in</span> <span class="n">length</span><span class="p">:</span>
                <span class="c"># for example: &#39;n*2&#39;</span>
                <span class="n">tokens</span> <span class="o">=</span> <span class="n">length</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">size_parameter</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">size_multiplier</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">size_parameter</span> <span class="o">=</span> <span class="n">length</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">pass</span>
 
    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="Parameter._format_type"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Parameter._format_type">[docs]</a>    <span class="k">def</span> <span class="nf">_format_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_string</span><span class="p">,</span> <span class="n">with_size</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Format a type, add ``const``, ``*`` and ``[]`` if they are relevant. &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">const</span><span class="p">:</span>
            <span class="n">type_string</span> <span class="o">=</span> <span class="s">&#39;const &#39;</span> <span class="o">+</span> <span class="n">type_string</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="p">:</span>
            <span class="n">type_string</span> <span class="o">+=</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="s">&#39;*&#39;</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span>
        <span class="k">if</span> <span class="n">with_size</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_parameter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">type_string</span> <span class="o">+=</span> <span class="s">&#39; [</span><span class="si">%s</span><span class="s">]&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_parameter</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">type_string</span> <span class="o">+=</span> <span class="s">&#39; [</span><span class="si">%u</span><span class="s">]&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_size</span>
        
        <span class="k">return</span> <span class="n">type_string</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="Parameter.format_gl_type"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Parameter.format_gl_type">[docs]</a>    <span class="k">def</span> <span class="nf">format_gl_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">with_size</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; format the translated type parameter. &quot;&quot;&quot;</span>

        <span class="c"># Fixme: method name</span>

        <span class="n">c_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_type</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c_type</span><span class="p">,</span> <span class="n">Type</span><span class="p">):</span>
            <span class="n">c_type</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c_type</span><span class="p">)</span>
        <span class="c"># Fixme: void</span>
        <span class="c"># else c_type = &#39;void&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_type</span><span class="p">(</span><span class="n">c_type</span><span class="p">,</span> <span class="n">with_size</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Return the C parameter declaration, e.g. ``GLint location``. &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_format_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="Parameter.prototype"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Parameter.prototype">[docs]</a>    <span class="k">def</span> <span class="nf">prototype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">with_size</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Return the C parameter declaration but with translated type. &quot;&quot;&quot;</span>

        <span class="c"># Fixme: method name</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format_gl_type</span><span class="p">(</span><span class="n">with_size</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_gl_type</span><span class="p">(</span><span class="n">with_size</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="Parameter.long_repr"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Parameter.long_repr">[docs]</a>    <span class="k">def</span> <span class="nf">long_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;Parameter </span><span class="si">%(name)s</span><span class="s"></span>
<span class="s">  location           </span><span class="si">%(location_)s</span><span class="s"></span>
<span class="s">  type               </span><span class="si">%(type)s</span><span class="s"></span>
<span class="s">  group              </span><span class="si">%(group)s</span><span class="s"></span>
<span class="s">  const              </span><span class="si">%(const)s</span><span class="s"></span>
<span class="s">  pointer            </span><span class="si">%(pointer)s</span><span class="s"></span>
<span class="s">  c type             </span><span class="si">%(c_type)s</span><span class="s"></span>
<span class="s">  size parameter     </span><span class="si">%(size_parameter)s</span><span class="s"></span>
<span class="s">  pointer parameters </span><span class="si">%(pointer_parameters)s</span><span class="s"></span>
<span class="s">  computed size      </span><span class="si">%(computed_size)s</span><span class="s"></span>
<span class="s">  size_multiplier    </span><span class="si">%(size_multiplier)u</span><span class="s"></span>
<span class="s">  array_size         </span><span class="si">%(array_size_)s</span><span class="s"></span>
<span class="s">&quot;&quot;&quot;</span>

        <span class="c"># Fixme:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
        <span class="n">d</span><span class="p">[</span><span class="s">&#39;array_size_&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array_size</span><span class="p">)</span>
        <span class="n">d</span><span class="p">[</span><span class="s">&#39;location_&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">template</span> <span class="o">%</span> <span class="n">d</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="Parameter.is_generic_pointer"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Parameter.is_generic_pointer">[docs]</a>    <span class="k">def</span> <span class="nf">is_generic_pointer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Test if parameter is ``void *``. &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_type</span> <span class="o">==</span> <span class="s">&#39;void&#39;</span>

<span class="c">####################################################################################################</span>
</div></div>
<div class="viewcode-block" id="Feature"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Feature">[docs]</a><span class="k">class</span> <span class="nc">Feature</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class defines the features of an API.</span>

<span class="sd">    Features are provided as a list of required or removed interfaces (commands, enumerants and</span>
<span class="sd">    types).</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">        :attr:`api`</span>

<span class="sd">        :attr:`api_number`</span>

<span class="sd">        :attr:`comment`</span>

<span class="sd">        :attr:`name`</span>

<span class="sd">        :attr:`protect`</span>

<span class="sd">    XML Registry Documentation:</span>
<span class="sd">    </span>
<span class="sd">        API features are described in individual ``&lt;feature&gt;`` tags. A feature is the set of</span>
<span class="sd">        interfaces (enumerants and commands) defined by a particular API and version, such as OpenGL</span>
<span class="sd">        4.0 or OpenGL ES 3.0, and includes all API profiles of that version.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;feature&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            api</span>
<span class="sd">                API name this feature is for (see ``&lt;ref&gt;``), such as gl or gles2.</span>
<span class="sd">            </span>
<span class="sd">            name</span>
<span class="sd">                version name, used as the C preprocessor token under which the version&#39;s interfaces</span>
<span class="sd">                are protected against multiple inclusion. Example: GL_VERSION_4_2.</span>
<span class="sd">            </span>
<span class="sd">            protect</span>
<span class="sd">                an additional preprocessor token used to protect a feature definition. Usually</span>
<span class="sd">                another feature or extension name. Rarely used, for odd circumstances where the</span>
<span class="sd">                definition of a feature or extension requires another to be defined first.</span>
<span class="sd">            </span>
<span class="sd">            number</span>
<span class="sd">                feature version number, usually a string interpreted as</span>
<span class="sd">                majorNumber.minorNumber. Example: 4.2.</span>
<span class="sd">            </span>
<span class="sd">            comment</span>
<span class="sd">                arbitrary string (unused)</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;feature&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            Zero or more ``&lt;require&gt;`` and ``&lt;remove&gt;`` tags (see ``&lt;ref&gt;``), in arbitrary order.</span>
<span class="sd">            Each tag describes a set of interfaces that is respectively required for, or removed</span>
<span class="sd">            from, this feature, as described below.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">api</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span>
                 <span class="n">protect</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">=</span> <span class="n">api</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="c"># self.number = number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protect</span> <span class="o">=</span> <span class="n">protect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">api_number</span> <span class="o">=</span> <span class="n">ApiNumber</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>

        <span class="c"># Fixme: subclass list?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interface_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_interface_list</span><span class="p">)</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="Feature.append"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Feature.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_interface_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interface</span><span class="p">)</span>

<span class="c">####################################################################################################</span>
</div></div>
<div class="viewcode-block" id="Extension"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Extension">[docs]</a><span class="k">class</span> <span class="nc">Extension</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class defines the features of an extension.</span>

<span class="sd">    Features are provided as a list of required or removed interfaces (commands, enumerants and</span>
<span class="sd">    types).</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">        :attr:`comment`</span>

<span class="sd">        :attr:`name`</span>

<span class="sd">        :attr:`protect`</span>

<span class="sd">        :attr:`supported`</span>

<span class="sd">    XML Registry Documentation:</span>
<span class="sd">    </span>
<span class="sd">        The ``&lt;extensions&gt;`` tag contains definitions of each of the extenions which are defined for</span>
<span class="sd">        the API.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;extensions&gt;`` tags: None</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;extensions&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            Each ``&lt;extensions&gt;`` block contains zero or more ``&lt;extension&gt;`` tags, each describing</span>
<span class="sd">            an API extension, in arbitrary order (although they are typically ordered by sorting on</span>
<span class="sd">            the extension name, to improve human readability).</span>
<span class="sd">        </span>
<span class="sd">        API Extensions (``&lt;extension&gt;`` tag):</span>
<span class="sd">        </span>
<span class="sd">        API extensions are described in individual ``&lt;extension&gt;`` tags. An extension is the set of</span>
<span class="sd">        interfaces defined by a particular API extension specification, such as</span>
<span class="sd">        ARB_multitexture. ``&lt;extension&gt;`` is similar to ``&lt;feature&gt;``, but instead of having version</span>
<span class="sd">        and profile attributes, instead has a supported attribute, which describes the set of API</span>
<span class="sd">        names which the extension can potentially be implemented against.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;extension&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            supported</span>
<span class="sd">                a regular expression, with an implicit ^ and $ bracketing it, which should match the</span>
<span class="sd">                api tag of a set of ``&lt;feature&gt;`` tags.</span>
<span class="sd">            </span>
<span class="sd">            protect</span>
<span class="sd">                an additional preprocessor token used to protect an extension def- inition. Usually</span>
<span class="sd">                another feature or extension name. Rarely used, for odd cir- cumstances where the</span>
<span class="sd">                definition of an extension requires another to be defined first.</span>
<span class="sd">            </span>
<span class="sd">            comment</span>
<span class="sd">                arbitrary string (unused)</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;extension&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            Zero or more ``&lt;require&gt;`` and ``&lt;remove&gt;`` tags (see ``&lt;ref&gt;``), in arbitrary order.</span>
<span class="sd">            Each tag describes a set of interfaces that is respectively required for, or removed</span>
<span class="sd">            from, this extension, as described below.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span><span class="p">,</span> <span class="n">supported</span><span class="p">,</span>
                 <span class="n">protect</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">supported</span> <span class="o">=</span> <span class="n">supported</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protect</span> <span class="o">=</span> <span class="n">protect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>

        <span class="c"># Fixme: subclass list?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interface_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_interface_list</span><span class="p">)</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="Extension.append"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.Extension.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_interface_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interface</span><span class="p">)</span>

<span class="c">####################################################################################################</span>
</div></div>
<div class="viewcode-block" id="RequiredInterface"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.RequiredInterface">[docs]</a><span class="k">class</span> <span class="nc">RequiredInterface</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class defines a required interface.</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">        :attr:`api`</span>

<span class="sd">        :attr:`comment`</span>

<span class="sd">        :attr:`profile`</span>

<span class="sd">    XML Registry Documentation:</span>
<span class="sd">    </span>
<span class="sd">        A ``&lt;require&gt;`` block defines a set of interfaces (types, enumerants and commands) required</span>
<span class="sd">        by a ``&lt;feature&gt;`` or ``&lt;extension&gt;``. A ``&lt;remove&gt;`` block defines a set of interfaces</span>
<span class="sd">        removed by a ``&lt;feature&gt;`` (this is primarily useful for the OpenGL core profile, which</span>
<span class="sd">        removed many interfaces - extensions should never remove interfaces, although this usage is</span>
<span class="sd">        allowed by the schema). Except for the tag name and behavior, the contents of ``&lt;require&gt;``</span>
<span class="sd">        and ``&lt;remove&gt;`` tags are identical.</span>
<span class="sd">        </span>
<span class="sd">        Attributes of ``&lt;require&gt;`` and ``&lt;remove&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            profile</span>
<span class="sd">                string name of an API profile. Interfaces in the tag are only required (or removed)</span>
<span class="sd">                if the specified profile is being generated. If not specified, interfaces are</span>
<span class="sd">                required (or removed) for all API profiles.</span>
<span class="sd">            </span>
<span class="sd">            comment</span>
<span class="sd">                arbitrary string (unused)</span>
<span class="sd">            </span>
<span class="sd">            api</span>
<span class="sd">                an API name (see ``&lt;ref&gt;``). Interfaces in the tag are only required (or removed) if</span>
<span class="sd">                the specified API is being generated. If not specified, interfaces are required (or</span>
<span class="sd">                removed) for all APIs. The api attribute is only supported inside ``&lt;extension&gt;``</span>
<span class="sd">                tags, since ``&lt;feature&gt;`` tags already define a specific API.</span>
<span class="sd">        </span>
<span class="sd">        Contents of ``&lt;require&gt;`` and ``&lt;remove&gt;`` tags:</span>
<span class="sd">        </span>
<span class="sd">            Zero or more of the following tags, in any order:</span>
<span class="sd">            </span>
<span class="sd">            * ``&lt;command&gt;`` specifies an required (or removed) command defined in a ``&lt;commands&gt;``</span>
<span class="sd">              block. The tag has no content, but contains elements:</span>
<span class="sd">            </span>
<span class="sd">                  name</span>
<span class="sd">                      name of the command (required).</span>
<span class="sd">                  </span>
<span class="sd">                  comment</span>
<span class="sd">                      arbitrary string (optional and unused).</span>
<span class="sd">            </span>
<span class="sd">            * ``&lt;enum&gt;`` specifies an required (or removed) enumerant defined in a ``&lt;enums&gt;``</span>
<span class="sd">              block. The tag has no content, but contains elements:</span>
<span class="sd">            </span>
<span class="sd">                  name</span>
<span class="sd">                      name of the enumerant (required).</span>
<span class="sd">                  </span>
<span class="sd">                  comment</span>
<span class="sd">                      arbitrary string (optional and unused).</span>
<span class="sd">            </span>
<span class="sd">            * ``&lt;type&gt;`` specifies a required (or removed) type defined in a ``&lt;types&gt;`` block.</span>
<span class="sd">              Most types are picked up implicitly by using the ``&lt;ptype&gt;`` tags of commands, but in</span>
<span class="sd">              a few cases, additional types need to be specified explicitly (it is unlikely that a</span>
<span class="sd">              type would ever be removed, although this usage is allowed by the schema). The tag has</span>
<span class="sd">              no content, but contains elements:</span>
<span class="sd">            </span>
<span class="sd">                  name</span>
<span class="sd">                      name of the type (required).</span>
<span class="sd">                  </span>
<span class="sd">                  comment</span>
<span class="sd">                      arbitrary string (optional and unused).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_logger</span> <span class="o">=</span> <span class="n">_module_logger</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="s">&#39;RequiredInterface&#39;</span><span class="p">)</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">profile</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">=</span> <span class="n">api</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="RequiredInterface.append"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.RequiredInterface.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="RequiredInterface.append_new"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.RequiredInterface.append_new">[docs]</a>    <span class="k">def</span> <span class="nf">append_new</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Create and append a :class:`RequiredItem`. &quot;&quot;&quot;</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">RequiredItem</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="RequiredInterface.merge"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.RequiredInterface.merge">[docs]</a>    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Merge with an interface. &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">interface</span><span class="p">,</span> <span class="n">RemovedInterface</span><span class="p">):</span>
            <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;Remove&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">interface</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="s">&#39;Add&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">interface</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> interface</span><span class="se">\n</span><span class="s">  (profile = </span><span class="si">%s</span><span class="s">) </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">interface</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">interface</span><span class="o">.</span><span class="n">comment</span><span class="p">)</span>

<span class="c">####################################################################################################</span>
</div></div>
<div class="viewcode-block" id="RequiredItem"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.RequiredItem">[docs]</a><span class="k">class</span> <span class="nc">RequiredItem</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class represents a required command, enumerant or type for an interface.</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">        :attr:`comment`</span>

<span class="sd">        :attr:`name`</span>

<span class="sd">        :attr:`type`</span>
<span class="sd">            can be &quot;command&quot;, &quot;enumerant&quot; or &quot;type&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">type_</span><span class="p">,</span>
                 <span class="n">name</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type_</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span> 

<span class="c">####################################################################################################</span>
</div>
<div class="viewcode-block" id="RemovedInterface"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.RemovedInterface">[docs]</a><span class="k">class</span> <span class="nc">RemovedInterface</span><span class="p">(</span><span class="n">RequiredInterface</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class defines a removed interface. &quot;&quot;&quot;</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="RemovedInterface.append_new"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.RemovedInterface.append_new">[docs]</a>    <span class="k">def</span> <span class="nf">append_new</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Create and append a :class:`RemovedItem`. &quot;&quot;&quot;</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">RemovedItem</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="c">####################################################################################################</span>
</div></div>
<div class="viewcode-block" id="RemovedItem"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.RemovedItem">[docs]</a><span class="k">class</span> <span class="nc">RemovedItem</span><span class="p">(</span><span class="n">RequiredItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This class represents a removed command, enumerant or type from an interface. &quot;&quot;&quot;</span>

<span class="c">####################################################################################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser">[docs]</a><span class="k">class</span> <span class="nc">GlSpecParser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This class implements the OpenGL Registry XML file parser and the Oriented Object interface.</span>

<span class="sd">    Public Attributes:</span>

<span class="sd">      :attr:`commands`</span>
<span class="sd">          :class:`Commands` instance</span>

<span class="sd">      :attr:`enums_list`</span>

<span class="sd">      :attr:`extension_list`</span>

<span class="sd">      :attr:`feature_list`</span>

<span class="sd">      :attr:`groups`</span>
<span class="sd">          :class:`Groups` instance</span>

<span class="sd">      :attr:`types`</span>
<span class="sd">          :class:`Types` instance</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># Fixme: class name</span>

    <span class="n">_logger</span> <span class="o">=</span> <span class="n">_module_logger</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="s">&#39;GlSpecParser&#39;</span><span class="p">)</span>

    <span class="c">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_file_path</span><span class="p">,</span> <span class="n">schema_file_path</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">xml_file_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">schema_file_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">schema_file_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">types</span> <span class="o">=</span> <span class="n">Types</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="n">Groups</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commands</span> <span class="o">=</span> <span class="n">Commands</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enums_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feature_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extension_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_parse</span><span class="p">()</span>

    <span class="c">##############################################</span>

<div class="viewcode-block" id="GlSpecParser._validate"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._validate">[docs]</a>    <span class="k">def</span> <span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relax_ng_file_path</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Validate the XML file using the given RelaxNG schema. &quot;&quot;&quot;</span>
        
        <span class="n">relax_ng</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">RelaxNG</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="n">relax_ng_file_path</span><span class="p">)</span>
        <span class="n">relax_ng</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tree</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="GlSpecParser._copy_dict"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._copy_dict">[docs]</a>    <span class="k">def</span> <span class="nf">_copy_dict</span><span class="p">(</span><span class="n">source_dict</span><span class="p">,</span> <span class="n">renaming</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Copy a dictionary.</span>

<span class="sd">        The parameter *renaming* can be specified to perform a key renaming during the copy. It must</span>
<span class="sd">        be a dictionary where the keys correspond to the source keys and the values to the</span>
<span class="sd">        destination keys.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">new_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">source_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">renaming</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">renaming</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">renaming</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        
        <span class="k">return</span> <span class="n">new_dict</span>

    <span class="c">##############################################</span>
</div>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="GlSpecParser._convert_node_attributes"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._convert_node_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">_convert_node_attributes</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">int_attributes</span><span class="o">=</span><span class="p">(),</span> <span class="n">renaming</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Convert node attributes.</span>

<span class="sd">        The parameter *int_attributes* specifies a list of attributes that must be converted to</span>
<span class="sd">        integers.</span>

<span class="sd">        The parameter *renaming* can be specified to perform a key renaming during the copy. It must</span>
<span class="sd">        be a dictionary where the keys correspond to the source keys and the values to the</span>
<span class="sd">        destination keys.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">attributes</span> <span class="o">=</span> <span class="n">GlSpecParser</span><span class="o">.</span><span class="n">_copy_dict</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">attrib</span><span class="p">,</span> <span class="n">renaming</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">int_attributes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                <span class="n">attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">attributes</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">base</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">attributes</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._iter_on_node"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._iter_on_node">[docs]</a>    <span class="k">def</span> <span class="nf">_iter_on_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Iter on nodes and call the callback function if the tag match. &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                <span class="n">callback</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._parse"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._parse">[docs]</a>    <span class="k">def</span> <span class="nf">_parse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse the XML file and create the Oriented Object interface. &quot;&quot;&quot;</span>

        <span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">root</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="s">&#39;registry&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NameError</span><span class="p">(</span><span class="s">&quot;Bad root&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">root</span><span class="p">:</span>
            <span class="c"># print type(node), node.tag</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;types&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_iter_on_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_type</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;groups&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_iter_on_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s">&#39;group&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_group</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;enums&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_enums</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;commands&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_iter_on_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s">&#39;command&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_command</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;feature&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_feature</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;extensions&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_iter_on_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s">&#39;extension&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_extension</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._parse_type"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._parse_type">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_node</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse ``&lt;type&gt;`` tags. &quot;&quot;&quot;</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">type_node</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">type_node</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;c_declaration_head&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_node</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">type_node</span><span class="o">.</span><span class="n">tail</span><span class="p">:</span>
            <span class="c"># Fixme:</span>
            <span class="c">#   &lt;type&gt;typedef void (&lt;apientry/&gt; *&lt;name&gt;GLDEBUGPROC&lt;/name&gt;)(GLenum source,GLenum type,GLuint id,GLenum severity,GLsizei length,const GLchar *message,const void *userParam);&lt;/type&gt;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;c_declaration_tail&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_node</span><span class="o">.</span><span class="n">tail</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">type_node</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;apientry&#39;</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;api_entry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;name&#39;</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">text</span>
        <span class="n">type_</span><span class="o">=</span> <span class="n">Type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._parse_group"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._parse_group">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_node</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse ``&lt;group&gt;`` tags. &quot;&quot;&quot;</span>

        <span class="n">enum_name_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">enum_node</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">enum_node</span> <span class="ow">in</span> <span class="n">group_node</span><span class="p">]</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span><span class="n">enum_name_list</span><span class="o">=</span><span class="n">enum_name_list</span><span class="p">,</span> <span class="o">**</span><span class="n">group_node</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._parse_enums"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._parse_enums">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_enums</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse ``&lt;enums&gt;`` tags. &quot;&quot;&quot;</span>

        <span class="n">attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_node_attributes</span><span class="p">(</span><span class="n">node</span><span class="p">,</span>
                                                   <span class="n">int_attributes</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;start&#39;</span><span class="p">,</span> <span class="s">&#39;stop&#39;</span><span class="p">),</span>
                                                   <span class="n">renaming</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;type_&#39;</span><span class="p">})</span>
        <span class="n">enums</span> <span class="o">=</span> <span class="n">Enums</span><span class="p">(</span><span class="o">**</span><span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enums_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">enums</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">enum_node</span> <span class="ow">in</span> <span class="n">node</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">enum_node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;enum&#39;</span><span class="p">:</span>
                <span class="n">attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_node_attributes</span><span class="p">(</span><span class="n">enum_node</span><span class="p">,</span>
                                                           <span class="n">int_attributes</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;value&#39;</span><span class="p">,),</span>
                                                           <span class="n">renaming</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;type_&#39;</span><span class="p">})</span>
                <span class="n">enum</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="o">**</span><span class="n">attributes</span><span class="p">)</span>
                <span class="n">enums</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">enum</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._parse_command"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._parse_command">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command_node</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse ``&lt;command&gt;`` tags. &quot;&quot;&quot;</span>

        <span class="n">command_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">parameter_location</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">command_node</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;proto&#39;</span><span class="p">:</span>
                <span class="c"># Fixme: api ?</span>
                <span class="n">return_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_parameter</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                <span class="n">command_kwargs</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">return_type</span><span class="o">.</span><span class="n">name</span>
                <span class="n">command_kwargs</span><span class="p">[</span><span class="s">&#39;return_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">return_type</span>
                <span class="n">return_type</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;param&#39;</span><span class="p">:</span>
                <span class="n">parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_parameter</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">parameter_location</span><span class="p">)</span>
                <span class="n">parameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
                <span class="n">parameter_location</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> <span class="o">**</span><span class="n">command_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._parse_ctype"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._parse_ctype">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_ctype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse a C type and look for ``const`` and pointer multiplicity.</span>

<span class="sd">        Return the type without ``const`` and ``*``.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;const&#39;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;const&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>

        <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;**&#39;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;pointer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;*const*&#39;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;pointer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[:</span><span class="o">-</span><span class="mi">7</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">text</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;pointer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._parse_parameter"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._parse_parameter">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">parameter_location</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse ``&lt;param&gt;`` tags.</span>

<span class="sd">        The parameter *parameter_location* is not specified for return type.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c"># Case without text and tail:</span>
        <span class="c">#   &lt;param group=&quot;TextureTarget&quot;&gt;&lt;ptype&gt;GLenum&lt;/ptype&gt; &lt;name&gt;target&lt;/name&gt;&lt;/param&gt;</span>
        <span class="c">#   </span>
        <span class="c"># Case wit text:</span>
        <span class="c">#   &lt;param group=&quot;CompressedTextureARB&quot; len=&quot;imageSize&quot;&gt;const void *&lt;name&gt;data&lt;/name&gt;&lt;/param&gt;</span>
        <span class="c">#   </span>
        <span class="c"># Case with tail:</span>
        <span class="c">#   &lt;param len=&quot;COMPSIZE(uniformCount)&quot;&gt;&lt;ptype&gt;GLuint&lt;/ptype&gt; *&lt;name&gt;uniformIndices&lt;/name&gt;&lt;/param&gt;</span>
        <span class="c">#</span>
        <span class="c"># Case with text and tail:</span>
        <span class="c">#   &lt;param len=&quot;count&quot;&gt;const &lt;ptype&gt;GLchar&lt;/ptype&gt; *const*&lt;name&gt;path&lt;/name&gt;&lt;/param&gt;</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copy_dict</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">attrib</span><span class="p">,</span> <span class="n">renaming</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;len&#39;</span><span class="p">:</span> <span class="s">&#39;length&#39;</span><span class="p">})</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="n">child</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">text</span>
            <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">tail</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_ctype</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">tail</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_ctype</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">&#39;ptype&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span> <span class="c"># Fixme: and text?</span>
                <span class="c"># for example: &#39;const void *&#39;</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;ptype&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">text</span>

        <span class="k">return</span> <span class="n">Parameter</span><span class="p">(</span><span class="n">gl_types</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">parameter_location</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._parse_interface"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._parse_interface">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface_node</span><span class="p">,</span> <span class="n">interface</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse nodes in a ``&lt;required&gt;`` or ``&lt;removed&gt;`` tag. &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">item_node</span> <span class="ow">in</span> <span class="n">interface_node</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item_node</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Comment</span><span class="p">:</span>
                <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">item_node</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;type_&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_node</span><span class="o">.</span><span class="n">tag</span>
                <span class="n">interface</span><span class="o">.</span><span class="n">append_new</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._parse_feature"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._parse_feature">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_feature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature_node</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse ``&lt;feature&gt;`` tags. &quot;&quot;&quot;</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">feature_node</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
        <span class="n">feature</span> <span class="o">=</span> <span class="n">Feature</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feature_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">interface_node</span> <span class="ow">in</span> <span class="n">feature_node</span><span class="p">:</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">interface_node</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">interface_node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;require&#39;</span><span class="p">:</span>
                <span class="n">interface</span> <span class="o">=</span> <span class="n">RequiredInterface</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">interface_node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;remove&#39;</span><span class="p">:</span>
                <span class="n">interface</span> <span class="o">=</span> <span class="n">RemovedInterface</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parse_interface</span><span class="p">(</span><span class="n">interface_node</span><span class="p">,</span> <span class="n">interface</span><span class="p">)</span>
            <span class="n">feature</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interface</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser._parse_extension"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser._parse_extension">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_extension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extension_node</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse ``&lt;extension&gt;`` tags. &quot;&quot;&quot;</span>
        
        <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">extension_node</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
        <span class="n">extension</span> <span class="o">=</span> <span class="n">Extension</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extension_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">extension</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">interface_node</span> <span class="ow">in</span> <span class="n">extension_node</span><span class="p">:</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">interface_node</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">interface_node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s">&#39;require&#39;</span><span class="p">:</span>
                <span class="n">interface</span> <span class="o">=</span> <span class="n">RequiredInterface</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Bad interface&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parse_interface</span><span class="p">(</span><span class="n">interface_node</span><span class="p">,</span> <span class="n">interface</span><span class="p">)</span>
            <span class="n">extension</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interface</span><span class="p">)</span>

    <span class="c">##############################################</span>
</div>
<div class="viewcode-block" id="GlSpecParser.generate_api"><a class="viewcode-back" href="../../api/PyOpenGLng/GlApi.html#PyOpenGLng.GlApi.GlSpecParser.generate_api">[docs]</a>    <span class="k">def</span> <span class="nf">generate_api</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api</span><span class="p">,</span> <span class="n">api_number</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Generate the API for a given API type (GL, GLES), version and profile.</span>

<span class="sd">        Return the list of enumerants and commands.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c"># Fixme: how to load an extension?</span>
        <span class="c">#  explicitely, but check it is available</span>
        <span class="c">#  check additional functions in libGL</span>

        <span class="k">if</span> <span class="n">api</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;gl&#39;</span><span class="p">,</span> <span class="s">&#39;gles&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;api must be &#39;gl&#39; or &#39;gles&#39;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Generate API </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> profile:</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">api_number</span><span class="p">,</span> <span class="n">profile</span><span class="p">))</span>

        <span class="n">all_api_enums</span> <span class="o">=</span> <span class="n">Enums</span><span class="p">(</span><span class="n">namespace</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">enums</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">enums_list</span><span class="p">:</span>
            <span class="n">all_api_enums</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">enums</span><span class="p">)</span>

        <span class="n">required_interface</span> <span class="o">=</span> <span class="n">RequiredInterface</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">feature_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">feature</span><span class="o">.</span><span class="n">api</span> <span class="o">==</span> <span class="n">api</span> <span class="ow">and</span> <span class="n">feature</span><span class="o">.</span><span class="n">api_number</span> <span class="o">&lt;=</span> <span class="n">api_number</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;Merge features of </span><span class="si">%s</span><span class="s"> API </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">feature</span><span class="o">.</span><span class="n">api</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">feature</span><span class="o">.</span><span class="n">api_number</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">interface</span> <span class="ow">in</span> <span class="n">feature</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">profile</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">interface</span><span class="o">.</span><span class="n">profile</span> <span class="ow">is</span> <span class="bp">None</span>
                        <span class="ow">or</span> <span class="n">interface</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="n">profile</span><span class="p">):</span>
                        <span class="n">required_interface</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">interface</span><span class="p">)</span>

        <span class="n">api_enums</span> <span class="o">=</span> <span class="n">Enums</span><span class="p">(</span><span class="n">namespace</span><span class="o">=</span><span class="n">api</span> <span class="o">+</span> <span class="s">&#39;-&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">api_number</span><span class="p">))</span> <span class="c"># + profile</span>
        <span class="n">api_commands</span> <span class="o">=</span> <span class="n">Commands</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">required_interface</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s">&#39;enum&#39;</span><span class="p">:</span>
                <span class="n">api_enums</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">all_api_enums</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">],</span> <span class="n">primary_registration</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s">&#39;command&#39;</span><span class="p">:</span>
                <span class="n">api_commands</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">api_enums</span><span class="p">,</span> <span class="n">api_commands</span>

<span class="c">####################################################################################################</span>
<span class="c">#</span>
<span class="c"># End</span>
<span class="c">#</span>
<span class="c">####################################################################################################</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">PyOpenGLng 0.1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Fabrice Salvaire.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>